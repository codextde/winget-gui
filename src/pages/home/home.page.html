<ion-header>
  <ion-toolbar color="primary">
    <ion-buttons slot="start">
      <ion-menu-button></ion-menu-button>
    </ion-buttons>
    <div class="px-5">
      <ion-segment
        mode="ios"
        [value]="mode"
        (ionChange)="segmentChanged($event)"
      >
        <ion-segment-button value="packages">
          <ion-label>Packages</ion-label>
        </ion-segment-button>
        <ion-segment-button value="installed">
          <ion-label>Installed</ion-label>
        </ion-segment-button>
      </ion-segment>
    </div>
  </ion-toolbar>
</ion-header>

<ion-content class="ion-padding">
  <!--<ion-searchbar
    [(ngModel)]="search"
    (keydown.enter)="doSearch()"
  ></ion-searchbar>-->
  <div *ngIf="mode == 'packages'">
    <ion-virtual-scroll
      [items]="packages | filter: currentSearch"
      approxItemHeight="353px"
    >
      <ion-card *virtualItem="let package; let itemBounds = bounds;">
        <ion-card-header>
          <ion-card-subtitle>{{package[1]}} - {{package[2]}}</ion-card-subtitle>
          <ion-card-title>{{package[0]}}</ion-card-title>
        </ion-card-header>
        <ion-card-content
          ><ion-button
            size="small"
            expand="block"
            color="light"
            (click)="install(package)"
            >Install</ion-button
          ></ion-card-content
        >
      </ion-card>
    </ion-virtual-scroll>
  </div>

  <div *ngIf="mode == 'installed'">
    <ion-virtual-scroll
      [items]="installed | filter: currentSearch"
      approxItemHeight="353px"
    >
      <ion-card *virtualItem="let package; let itemBounds = bounds;">
        <ion-card-header>
          <ion-card-subtitle>{{package[1]}} - {{package[2]}}</ion-card-subtitle>
          <ion-card-title>{{package[0]}}</ion-card-title>
        </ion-card-header>
        <ion-card-content
          ><ion-button
            size="small"
            expand="block"
            color="light"
            (click)="install(package)"
            >Update</ion-button
          ><ion-button
            size="small"
            expand="block"
            color="light"
            (click)="uninstall(package)"
            >Uninstall</ion-button
          ></ion-card-content
        >
      </ion-card>
    </ion-virtual-scroll>
  </div>

  <!--<ion-card *ngFor="let package of packages | filter: currentSearch">
    <ion-card-header>
      <ion-card-subtitle>{{package[1]}} - {{package[2]}}</ion-card-subtitle>
      <ion-card-title>{{package[0]}}</ion-card-title>
    </ion-card-header>
    <ion-card-content
      ><ion-button
        size="small"
        expand="block"
        color="light"
        (click)="install(package)"
        >Install</ion-button
      ></ion-card-content
    >
  </ion-card>-->
</ion-content>
